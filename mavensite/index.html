<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>onejar-maven-plugin - One-Jar Maven Plugin Site</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
          <meta name="author" content="Drew Stovall" />
          </head>
  <body class="composite">
    <div id="banner">
                  <a href="" id="bannerLeft">
    
                                            <img src="./images/logo.png" alt="" />
    
            </a>
                        <a href="" id="bannerRight">
    
                                            <img src="./images/logo-small.png" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2010-05-30
                      </div>
            <div class="xright">      
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>Project</h5>
            <ul>
              
    <li class="none">
                    <a href="./index.html">home</a>
          </li>
              
    <li class="none">
                    <a href="./usage.html">usage</a>
          </li>
              
    <li class="none">
                    <a href="./history.html">history</a>
          </li>
          </ul>
                                           <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>One-Jar Maven Plugin</h2>
<p>I wanted to distribute an application as a single jar without making people download all the dependencies, and found <a class="externalLink" href="http://one-jar.sourceforge.net/">One-Jar</a> on source-forge. Since I'm also learning a bit of maven, writing a plugin to automatically build a one-jar jar seemed like a good idea.</p>
<p>The project has moved to Google Code, which means the main front page is now at <a class="externalLink" href="http://onejar-maven-plugin.googlecode.com/">http://onejar-maven-plugin.googlecode.com/</a>. You will also find Issue tracking there.</p>
</div>
<div class="section"><h2>Updates (version 1.4.3)</h2>
<p>Updated by <a class="externalLink" href="http://blog.jayway.com/">Hugo Josefson</a> to use the latest version of one-jar (0.97). If you want to use the previous version of one-jar, just specfiy 0.96 as the argument to the <b>onejarVersion</b> argument.</p>
<p><a class="externalLink" href="http://onejar-maven-plugin.googlecode.com/svn/mavenrepo/org/dstovall/onejar-maven-plugin/1.4.3/onejar-maven-plugin-1.4.3-sources.jar">Source Code</a></p>
</div>
<div class="section"><h2>Updates (version 1.4.2)</h2>
<p>Updated by <a class="externalLink" href="http://blog.jayway.com/">Hugo Josefson</a> to fix Issue 21, renaming identically named jars to avoid ZipException.</p>
<p><a class="externalLink" href="http://onejar-maven-plugin.googlecode.com/svn/mavenrepo/org/dstovall/onejar-maven-plugin/1.4.2/onejar-maven-plugin-1.4.2-sources.jar">Source Code</a></p>
</div>
<div class="section"><h2>Updates (version 1.4.1)</h2>
<p>Updated by <a class="externalLink" href="http://blog.jayway.com/">Hugo Josefson</a> to include system scope dependencies in the built jar.</p>
<p><a class="externalLink" href="http://onejar-maven-plugin.googlecode.com/svn/mavenrepo/org/dstovall/onejar-maven-plugin/1.4.1/onejar-maven-plugin-1.4.1-sources.jar">Source Code</a></p>
</div>
<div class="section"><h2>Updates (version 1.4.0)</h2>
<p>Updated by <a class="externalLink" href="http://blog.jayway.com/">Hugo Josefson</a> to allow the generated one-jar to be attached to the build.</p>
<p><a class="externalLink" href="http://onejar-maven-plugin.googlecode.com/svn/mavenrepo/org/dstovall/onejar-maven-plugin/1.4.0/onejar-maven-plugin-1.4.0-sources.jar">Source Code</a></p>
</div>
<div class="section"><h2>Updates (version 1.3.0)</h2>
<p>Thank you to <a class="externalLink" href="http://code.google.com/u/eskatos.0">Paul</a> for contributing code for supporting the <a class="externalLink" href="http://one-jar.sourceforge.net/index.php?page=introduction&amp;file=native">binlib feature of One-Jar</a>.</p>
<p><a class="externalLink" href="http://onejar-maven-plugin.googlecode.com/svn/mavenrepo/org/dstovall/onejar-maven-plugin/1.3.0/onejar-maven-plugin-1.3.0-sources.jar">Source Code</a></p>
</div>
<div class="section"><h2>Updates (version 1.2.3)</h2>
<p>Updated by <a class="externalLink" href="http://blog.jayway.com/">Hugo Josefson</a> to include runtime dependencies instead of compile time dependencies.</p>
<p>Also thank you to Hannu for submitting the same fix, which reminded us to actually release this version!</p>
<p><a class="externalLink" href="http://onejar-maven-plugin.googlecode.com/svn/mavenrepo/org/dstovall/onejar-maven-plugin/1.2.3/onejar-maven-plugin-1.2.3-sources.jar">Source Code</a></p>
</div>
<div class="section"><h2>Updates (version 1.2.2)</h2>
<p>Thank you to <a class="externalLink" href="http://www.ferociousflirting.com">Matthew O. Smith</a> for contributing code to simplify the manifest manipulations and adding the Implementation Version manifest entry key.</p>
<p>Thank you to Stig Kleppe-Jorgensen for contributing code to support multiproject builds.</p>
<p><a class="externalLink" href="http://dstovall.org/maven2/org/dstovall/onejar-maven-plugin/1.2.2/onejar-maven-plugin-1.2.2-sources.jar">Source Code</a></p>
</div>
<div class="section"><h2>Updates (version 1.2.1)</h2>
<p>Thank you to <a class="externalLink" href="http://shineframework.sourceforge.net/site/index.html">Amir Kibbar</a> for contributing code to allow the plugin to operate without an exectuable jar. (ie the mainClass configuration parameter)</p>
<p><a class="externalLink" href="http://dstovall.org/maven2/org/dstovall/onejar-maven-plugin/1.2.1/onejar-maven-plugin-1.2.1-sources.jar">Source Code</a></p>
</div>
<div class="section"><h2>To Do</h2>
<p>This is a list of things I still want/need to add to the plugin... Feel free to email me more ideas, give advice, or just voice an opinion on them.</p>
<ul><li>Support the 'expand' functionality</li>
<li>Convert plugin to delegate to the ant tasks to increase seperation of concerns</li>
<li>Fix the manifest file to remove the boot warning that I get when running the resulting jar file.</li>
<li>Error out if the project's jar is not executable and no mainClass parameter is given. </li>
<li>Some sort of test cases...</li>
</ul>
</div>
<div class="section"><h2>Error when starting your app?</h2>
<p>If you get this error when starting your application:</p>
<div class="source"><pre>Boot: Warning: Unable to locate main/main.jar in the JAR file target/myproject-1.0-SNAPSHOT.one-jar.jar
Exception in thread &quot;main&quot; java.lang.Exception: myproject-1.0-SNAPSHOT.one-jar.jar main class was not
found (fix: add main/main.jar with a Main-Class manifest attribute, or specify -Done-jar.main.class=&lt;your.class.name&gt;),
or use One-Jar-Main-Class in the manifest
    at com.simontuffs.onejar.Boot.run(Boot.java:285)
    at com.simontuffs.onejar.Boot.main(Boot.java:159)</pre>
</div>
<p>Then you're either (a) not making your standard jar executable or (b) not providing a mainClass argument. Better messaging about this configuration error is in the works.</p>
</div>
<div class="section"><h2>Notes</h2>
<p>The maven documentation says that each module should really only be &quot;one primary output per project&quot; (see &quot;Better Builds with Maven e-Book&quot;). I'm debating with myself on this point: Part of me says that the one-jar output is not a &quot;primary&quot; output, so the current setup is fine... another part of me says that it is &quot;primary&quot; and that I should setup the plugin to run as a seperate project (under some super-project). For now, I'm going with the status quo, but if you have any strong opinions on this topic, please let me know.</p>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2007-2010
    
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
